<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body {
            background-color: rgb(55, 52, 52);
        }
    </style>
</head>

<body>
    <button class="btn btn-dark " type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasWithBothOptions"
        aria-controls="offcanvasWithBothOptions">Seçenekler</button>
    <div class="container">

        <p class=" fs-1 text-center fw-bold">Öğretmen Paneli</p>
    </div>


    <div class="offcanvas offcanvas-start bg-dark" data-bs-scroll="true" tabindex="-1" id="offcanvasWithBothOptions"
        aria-labelledby="offcanvasWithBothOptionsLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasWithBothOptionsLabel">Backdrop with scrolling</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <div class="container text-center">
                <div class="row">
                    <div class="col">
                        <p class="d-inline-flex gap-1">
                            <a class="btn btn-primary px-5" id="bilgilerimButonu" data-bs-toggle="collapse"
                                href="#multiCollapseExample1" role="button" aria-expanded="false"
                                aria-controls="multiCollapseExample1">BİLGİLERİM</a>

                        </p>
                        <div class="row my-5">
                            <div class="col">
                                <div class="collapse multi-collapse" id="multiCollapseExample1">
                                    <div class="card card-body">
                                        <div class="centered">

                                            <ul id="infoList"></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p class="d-inline-flex gap-1">
                            <a class="btn btn-primary px-4" data-bs-toggle="collapse" id="ogrencilerButonu"
                                href="#multiCollapseExample2" role="button" aria-expanded="false"
                                aria-controls="multiCollapseExample2">ÖĞRENCİLERİM</a>

                        </p>
                        <div class="row my-5">
                            <div class="col">
                                <div class="collapse multi-collapse" id="multiCollapseExample2">
                                    <div class="card card-body">
                                        <div class="centered">

                                            <ul id="infoList2"></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p class="d-inline-flex gap-1">
                            <a class="btn btn-primary px-4" data-bs-toggle="collapse" href="#multiCollapseExample3"
                                role="button" aria-expanded="false" aria-controls="multiCollapseExample3">ÖĞRENCİ
                                KAYDI</a>

                        </p>
                        <div class="row my-5">
                            <div class="col">
                                <div class="collapse multi-collapse" id="multiCollapseExample3">
                                    <div class="card card-body">
                                        Veritabanına öğrenci eklerken öğrenciye ait bütün bilgilerin girilmesi
                                        gerektiğini unutmayınız!
                                        <a class="btn btn-primary my-2" href="/kayit" role="button">Öğrenci Ekle</a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p class="d-inline-flex gap-1">
                            <a class="btn btn-primary px-4" data-bs-toggle="collapse" href="#multiCollapseExample5"
                                role="button" aria-expanded="false" aria-controls="multiCollapseExample5">SINAV
                                BİLGİLERİ</a>

                        </p>
                        <div class="row my-5">
                            <div class="col">
                                <div class="collapse multi-collapse" id="multiCollapseExample5">
                                    <div class="card card-body">
                                        Öğrencilerinizin sınavlarını okurken ve puanlarken ılıman yaklaşmanız onların
                                        özgüvenini arttıracaktır.
                                        lütfen bunu unutmayın!
                                        <a class="btn btn-primary my-2" href="/sinavDuzenle" role="button">KONTROL
                                            ET</a>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <p class="d-inline-flex gap-1">
                            <a class="btn btn-primary px-4" data-bs-toggle="collapse" href="#multiCollapseExample4"
                                role="button" aria-expanded="false" aria-controls="multiCollapseExample4">ŞİFRE
                                İŞLEMLERİ</a>
                        </p>
                        <div class="row my-5">
                            <div class="col">
                                <div class="collapse multi-collapse" id="multiCollapseExample4">
                                    <div class="card card-body">
                                        <div class="form-floating mb-3">
                                            <input type="text" class="form-control" id="floatingInput"
                                                placeholder="kullanıcı adınız">
                                            <label for="floatingInput">Kullanıcı Adı</label>
                                        </div>
                                        <div class="form-floating">
                                            <input type="password" class="form-control" id="floatingPassword"
                                                placeholder="Password">
                                            <label for="floatingPassword">Yeni şifre</label>
                                        </div>
                                        <button type="button" class="btn btn-danger my-2"
                                            id="changePasswordButton">Değiştir</button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="d-grid gap-2">
                <button class="btn btn-danger" type="button" id="logoutButton">Çıkış Yap</button>
            </div>
        </div>
    </div>


    <div class="container text-center py-5 ">
        <div class="row py-5">
            <div class="col">
                <div class="card border-dark" style="width: 18rem;">
                    <div class="card-body bg-danger text-light ">
                        <h5 class="card-title">Matematik</h5>
                        <h6 class="card-subtitle mb-2 text-body-light">Sınav Bilgileri</h6>
                        <p class="card-text">Sınava dair bilgilerde girilen sayıların tam sayı ve verilen linklerin
                            erişime açık olması gerektiğini unutmayın!</p>
                        <button type="button" class="btn btn-light" id="matematikButon">Düzenle</button>

                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card border-dark" style="width: 18rem;">
                    <div class="card-body bg-warning text-light">
                        <h5 class="card-title">Fizik</h5>
                        <h6 class="card-subtitle mb-2 text-body-light">Sınav Bilgileri</h6>
                        <p class="card-text">Sınava dair bilgilerde girilen sayıların tam sayı ve verilen linklerin
                            erişime açık olması gerektiğini unutmayın!</p>
                        <button type="button" class="btn btn-light" id="fizikButon">Düzenle</button>

                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card border-dark" style="width: 18rem;">
                    <div class="card-body bg-danger text-light">
                        <h5 class="card-title">Kimya</h5>
                        <h6 class="card-subtitle mb-2 text-body-light">Sınav Bilgileri</h6>
                        <p class="card-text">Sınava dair bilgilerde girilen sayıların tam sayı ve verilen linklerin
                            erişime açık olması gerektiğini unutmayın!</p>
                        <button type="button" class="btn btn-light" id="kimyaButon">Düzenle</button>

                    </div>
                </div>
            </div>

        </div>
        <div class="row">
            <div class="col">
                <div class="card border-dark" style="width: 18rem;">
                    <div class="card-body bg-dark text-light">
                        <h5 class="card-title">Tarih</h5>
                        <h6 class="card-subtitle mb-2 text-body-light">Sınav Bilgileri</h6>
                        <p class="card-text">Sınava dair bilgilerde girilen sayıların tam sayı ve verilen linklerin
                            erişime açık olması gerektiğini unutmayın!</p>
                        <button type="button" class="btn btn-light" id="tarihButon">Düzenle</button>

                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card border-dark" style="width: 18rem;">
                    <div class="card-body bg-success text-light">
                        <h5 class="card-title">Cografya</h5>
                        <h6 class="card-subtitle mb-2 text-body-light">Sınav Bilgileri</h6>
                        <p class="card-text">Sınava dair bilgilerde girilen sayıların tam sayı ve verilen linklerin
                            erişime açık olması gerektiğini unutmayın!</p>
                        <button type="button" class="btn btn-light" id="cografyaButon">Düzenle</button>

                    </div>
                </div>
            </div>
            <div class="col">
                <div class="card border-dark" style="width: 18rem;">
                    <div class="card-body bg-dark text-light">
                        <h5 class="card-title">Felsefe</h5>
                        <h6 class="card-subtitle mb-2 text-body-light">Sınav Bilgileri</h6>
                        <p class="card-text">Sınava dair bilgilerde girilen sayıların tam sayı ve verilen linklerin
                            erişime açık olması gerektiğini unutmayın!</p>
                        <button type="button" class="btn btn-light" id="felsefeButon">Düzenle</button>

                    </div>
                </div>
            </div>

        </div>

    </div>

    <!-- Modal HTML -->
    <div id="editModal" class="modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Sınav Bilgilerini Düzenle</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body py-2">
                    <form id="editForm">
                        <input type="hidden" id="sinavAdi" name="sinavAdi">
                        <div class="form-group my-2">
                            <label for="soruSayisi">Soru Sayısı</label>
                            <input type="number" class="form-control" id="soruSayisi" name="soruSayisi" required>
                        </div>
                        <div class="form-group my-2">
                            <label for="sure">Sınav Süresi (dakika)</label>
                            <input type="number" class="form-control" id="sure" name="sure" required>
                        </div>
                        <div class="form-group my-2">
                            <label for="sinavLink">Sınav Linki</label>
                            <input type="text" class="form-control" id="sinavLink" name="sinavLink" required>
                        </div>
                        <div class="form-group my-2">
                            <label for="cevapAnahtari">Cevap Anahtarı</label>
                            <input type="text" class="form-control" id="cevapAnahtari" name="cevapAnahtari" required>
                        </div>

                        <button type="submit" class="btn btn-primary my-3">Tamam</button>
                    </form>
                </div>
            </div>
        </div>
    </div>










    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const editModal = document.getElementById('editModal');
            const editForm = document.getElementById('editForm');
            const sinavAdiInput = document.getElementById('sinavAdi');
            const cevapAnahtari = document.getElementById('cevapAnahtari');

            document.querySelectorAll('button[id$="Buton"]').forEach(button => {
                button.addEventListener('click', function () {
                    const sinavAdi = this.closest('.card-body').querySelector('.card-title').innerText;
                    sinavAdiInput.value = sinavAdi;
                    $('#editModal').modal('show');
                });
            });

            editForm.addEventListener('submit', function (event) {
                event.preventDefault();
                const data = {
                    sinavAdi: editForm.sinavAdi.value,
                    soruSayisi: editForm.soruSayisi.value,
                    sure: editForm.sure.value,
                    sinavLink: editForm.sinavLink.value, // Yeni eklenen sınav linki
                    cevapAnahtari:editForm.cevapAnahtari.value
                };

                fetch('/updateExam', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                    .then(response => response.json())
                    .then(result => {
                        alert(result.message);
                        $('#editModal').modal('hide');
                    })
                    .catch(error => {
                        console.error('Error:', error);
                    });
            });
        });

    </script>

    <script>


        document.getElementById('logoutButton').addEventListener('click', function () {
            fetch('/cikis_ogretmen', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    window.location.href = '/anasayfa';
                } else {
                    alert('Çıkış yapma işlemi başarısız!');
                }
            });
        });

        document.getElementById('bilgilerimButonu').addEventListener('click', () => {
            fetch('/bilgilerim_ogretmen')
            .then(response => response.json())
        .then(data => {
            const infoList = document.getElementById('infoList');
            infoList.innerHTML = ''; // Önceki içeriği temizle

            const infoMap = {
                ad: "Ad",
                soyad: "Soyad",
                kullanici_adi: "Kullanıcı Adı"
            };

            // JSON verilerini listeye ekleyin
            for (const info of data) {
                for (const key in info) {
                    if (info.hasOwnProperty(key) && infoMap[key]) {
                        const listItem = document.createElement('li');
                        listItem.innerHTML = `<strong>${infoMap[key]}</strong>: ${info[key]}`;
                        infoList.appendChild(listItem);
                    }
                }
            }

            // Bilgileri göster
            document.getElementById('infoContainer').style.display = 'block';
        })
        .catch(error => console.error('Hata:', error));
});

        document.getElementById('ogrencilerButonu').addEventListener('click', () => {
            fetch('/ogrenci_bilgi')
                .then(response => response.json())
                .then(data => {
                    const infoList = document.getElementById('infoList2');
                    infoList.innerHTML = ''; // Önceki içeriği temizle

                    // JSON verilerini listeye ekleyin
                    for (const info of data) {
                        for (const key in info) {
                            if (info.hasOwnProperty(key)) {
                                const listItem = document.createElement('li');
                                listItem.textContent = `${key}: ${info[key]}`;
                                infoList.appendChild(listItem);
                            }
                        }
                    }

                    // Bilgileri göster
                    document.getElementById('infoContainer').style.display = 'block';
                })
                .catch(error => console.error('Hata:', error));
        });

        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('changePasswordButton').addEventListener('click', function () {
                var kullaniciAdi = document.getElementById('floatingInput').value;
                var yeniSifre = document.getElementById('floatingPassword').value;

                fetch('http://localhost:5500/sifre_degistir_ogretmen', { // Port numarasını burada belirtiyoruz
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ kullaniciAdi: kullaniciAdi, yeniSifre: yeniSifre })
                }).then(response => {
                    if (response.ok) {
                        alert('Şifre başarıyla değiştirildi.');
                        // Şifre değiştirme işlemi başarılıysa sayfayı yenile
                        window.location.reload();
                    } else {
                        alert('Şifre değiştirme işlemi başarısız!');
                    }
                }).catch(error => {
                    console.error('Şifre değiştirme işlemi sırasında bir hata oluştu:', error);
                    alert('Şifre değiştirme işlemi sırasında bir hata oluştu.');
                });
            });
        });




    </script>
</body>

</html>